<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏–∏</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 20px; background-color: #f4f7f6; color: #333; }
        .container { max-width: 1200px; margin: auto; background-color: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); }
        h1, h2 { color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 10px; margin-bottom: 20px; }
        .form-section { display: flex; flex-wrap: wrap; gap: 30px; margin-bottom: 30px; }
        .input-group { flex: 1; min-width: 200px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; }
        input[type="number"], select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; margin-bottom: 15px; }
        button { background-color: #28a745; color: white; padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; transition: background-color 0.3s; }
        button:hover { background-color: #218838; }
        .results-section { display: flex; gap: 30px; margin-top: 30px; }
        .regimen-card { flex: 1; padding: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); }
        #optimal-regimen { background-color: #e6f7ff; border-left: 5px solid #007bff; }
        #initial-regimen { background-color: #fff0f0; border-left: 5px solid #dc3545; }
        .metric-value { font-size: 24px; font-weight: bold; color: #007bff; }
        .metric-label { font-size: 14px; color: #6c757d; }
        .charts-section { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px; }
        #treatment-recommendation { background-color: #ffe0b2; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 5px solid #ff9800; }
        #treatment-recommendation h3 { margin-top: 0; color: #ff9800; }
        #drug-check-message { margin-top: 10px; padding: 10px; border-radius: 5px; font-size: 16px; }
        .correct { background-color: #e6ffe6; border-left: 4px solid #28a745; }
        .warning { background-color: #fff3cd; border-left: 4px solid #ffc107; }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ü–ª–∞–Ω –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏–∏</h1>

        <form id="optimization-form">
            <h2>1. –ë–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏ –ö–ª–∏–Ω–∏—á–µ—Å–∫–∏–µ –î–∞–Ω–Ω—ã–µ</h2>
            <div class="form-section">
                <div class="input-group">
                    <label for="subtype">–ú–æ–ª–µ–∫—É–ª—è—Ä–Ω—ã–π –ø–æ–¥—Ç–∏–ø</label>
                    <select id="subtype" required>
                        <option value="TNBC">TNBC (–¢—Ä–∏–∂–¥—ã-–Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π)</option>
                        <option value="HR-HER2+">HR-HER2+</option>
                        <option value="HR+HER2+">HR+HER2+</option>
                        <option value="HR+HER2-" selected>HR+HER2- (–õ—é–º–∏–Ω–∞–ª—å–Ω—ã–π)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="ki67_level">–£—Ä–æ–≤–µ–Ω—å Ki-67 (%)</label>
                    <input type="number" id="ki67_level" value="8.0" min="1" max="100" step="0.1" required>
                </div>
                <div class="input-group">
                    <label for="tumor_size">–†–∞–∑–º–µ—Ä –æ–ø—É—Ö–æ–ª–∏ (—Å–º)</label>
                    <input type="number" id="tumor_size" value="1.5" min="0.1" max="15.0" step="0.1" required>
                </div>
            </div>

            <h2>2. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (–ü–ö –∏ –¶–µ–ª—å –õ–µ—á–µ–Ω–∏—è)</h2>
            <div class="form-section">
                 <div class="input-group">
                    <label for="age">–í–æ–∑—Ä–∞—Å—Ç –ø–∞—Ü–∏–µ–Ω—Ç–∞ (–ü–ö)</label>
                    <input type="number" id="age" value="60" min="18" max="100" required>
                </div>

                <div class="input-group">
                    <label for="chemo_drug">–ü—Ä–µ–ø–∞—Ä–∞—Ç –¥–ª—è –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏–∏</label>
                    <select id="chemo_drug" required>
                        <option value="NotApplicable">–ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ</option>
                        <option value="Doxorubicin" selected>–î–æ–∫—Å–æ—Ä—É–±–∏—Ü–∏–Ω</option>
                        <option value="Paclitaxel">–ü–∞–∫–ª–∏—Ç–∞–∫—Å–µ–ª</option>
                        <option value="Carboplatin">–ö–∞—Ä–±–æ–ø–ª–∞—Ç–∏–Ω</option>
                        <option value="Cyclophosphamide">–¶–∏–∫–ª–æ—Ñ–æ—Å—Ñ–∞–º–∏–¥</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="target_drug">–ü—Ä–µ–ø–∞—Ä–∞—Ç –¥–ª—è –¢–∞—Ä–≥–µ—Ç–Ω–æ–π —Ç–µ—Ä–∞–ø–∏–∏ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)</label>
                    <select id="target_drug" required>
                        <option value="None" selected>–ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ</option>
                        <option value="Trastuzumab">–¢—Ä–∞—Å—Ç—É–∑—É–º–∞–±</option>
                        <option value="Pertuzumab">–ü–µ—Ä—Ç—É–∑—É–º–∞–±</option>
                        <option value="Lapatinib">–õ–∞–ø–∞—Ç–∏–Ω–∏–±</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="patient_stage">–°—Ç–∞–¥–∏—è –†–ú–ñ (1-4, –í–ª–∏—è–Ω–∏–µ –Ω–∞ Loss)</label>
                    <input type="number" id="patient_stage" value="1" min="1" max="4" required>
                </div>
                <div class="input-group">
                    <label for="ecog_status">–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å ECOG (0-4, –í–ª–∏—è–Ω–∏–µ –Ω–∞ –¢–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å)</label>
                    <select id="ecog_status" required>
                        <option value="0" selected>0: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–∫—Ç–∏–≤–µ–Ω</option>
                        <option value="1">1: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç—è–∂–µ–ª–æ–π —Ñ–∏–∑. –Ω–∞–≥—Ä—É–∑–∫–∏</option>
                        <option value="2">2: –í–Ω–µ –∫—Ä–æ–≤–∞—Ç–∏ > 50% –≤—Ä–µ–º–µ–Ω–∏</option>
                        <option value="3">3: –í –∫—Ä–æ–≤–∞—Ç–∏ –∏–ª–∏ –∫—Ä–µ—Å–ª–µ > 50% –≤—Ä–µ–º–µ–Ω–∏</option>
                        <option value="4">4: –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏–∫–æ–≤–∞–Ω –∫ –ø–æ—Å—Ç–µ–ª–∏</option>
                    </select>
                </div>
            </div>

            <h2>3. –ò—Å—Ö–æ–¥–Ω–∞—è (–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è) –°—Ö–µ–º–∞ (6 —Ü–∏–∫–ª–æ–≤)</h2>
            <div class="form-section">
                <div class="input-group">
                    <label for="initial_dose">–î–æ–∑–∞ (–º–≥)</label>
                    <input type="number" id="initial_dose" value="200.0" min="10" step="10.0" required>
                </div>
                <div class="input-group">
                    <label for="initial_interval">–ò–Ω—Ç–µ—Ä–≤–∞–ª (–¥–Ω–∏)</label>
                    <input type="number" id="initial_interval" value="14.0" min="7" step="1.0" required>
                </div>
            </div>

            <button type="submit">–ó–∞–ø—É—Å—Ç–∏—Ç—å –ü—Ä–æ–≥–Ω–æ–∑ –∏ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é</button>
        </form>

        <div id="loading" style="display:none; color:#007bff; font-weight:bold; margin-top: 20px;">
            –†–∞—Å—á–µ—Ç, –ø—Ä–æ–≥–Ω–æ–∑ –ª–µ—á–µ–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è...
        </div>

        <div id="results" style="display:none;">
            <hr>

            <div id="treatment-recommendation">
                <h3>üîç –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –¢–∏–ø –õ–µ—á–µ–Ω–∏—è</h3>
                <p style="font-size: 20px; font-weight: bold; color: #007bff;" id="recommended-treatment"></p>
                <p id="treatment-message" style="color: #555;"></p>
                <div id="drug-check-message"></div>
            </div>

            <div id="optimization-results">
                <h2>‚úîÔ∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏–∏ (6 —Ü–∏–∫–ª–æ–≤)</h2>
                <div class="results-section">
                    <div class="regimen-card" id="optimal-regimen">
                        <h3>–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è –°—Ö–µ–º–∞</h3>
                        <p class="metric-label">–î–æ–∑–∞ / –ò–Ω—Ç–µ—Ä–≤–∞–ª / –¶–∏–∫–ª—ã:</p>
                        <p class="metric-value">
                            <span id="opt-dose"></span> –º–≥ /
                            <span id="opt-interval"></span> –¥–Ω–µ–π / <span id="opt-cycles"></span> —Ü–∏–∫–ª–æ–≤
                        </p>

                        <p class="metric-label"><strong>–û–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª–µ—á–µ–Ω–∏—è:</strong></p>
                        <p class="metric-value"><span id="opt-total-time"></span> –¥–Ω–µ–π</p>

                        <p class="metric-label">–ü—Ä–æ–≥–Ω–æ–∑: –ö–æ–Ω–µ—á–Ω—ã–π –æ–±—ä–µ–º –æ–ø—É—Ö–æ–ª–∏:</p>
                        <p class="metric-value"><span id="opt-v-total"></span> —Å–º¬≥</p>

                        <p class="metric-label">–ü—Ä–æ–≥–Ω–æ–∑: –°–æ–≤–æ–∫—É–ø–Ω–æ–µ –≤—Ä–µ–º—è —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏:</p>
                        <p class="metric-value"><span id="opt-tox-time"></span> –¥–Ω–µ–π</p>
                    </div>

                    <div class="regimen-card" id="initial-regimen">
                        <h3>–ü—Ä–æ–≥–Ω–æ–∑ –¥–ª—è –ò—Å—Ö–æ–¥–Ω–æ–π –°—Ö–µ–º—ã (6 —Ü–∏–∫–ª–æ–≤)</h3>
                        <p class="metric-label">–î–æ–∑–∞ / –ò–Ω—Ç–µ—Ä–≤–∞–ª / –¶–∏–∫–ª—ã:</p>
                        <p class="metric-value">
                             <span id="init-dose"></span> –º–≥ /
                            <span id="init-interval"></span> –¥–Ω–µ–π / <span id="init-cycles"></span> —Ü–∏–∫–ª–æ–≤
                        </p>

                        <p class="metric-label"><strong>–û–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª–µ—á–µ–Ω–∏—è:</strong></p>
                        <p class="metric-value"><span id="init-total-time"></span> –¥–Ω–µ–π</p>

                        <p class="metric-label">–ü—Ä–æ–≥–Ω–æ–∑: –ö–æ–Ω–µ—á–Ω—ã–π –æ–±—ä–µ–º –æ–ø—É—Ö–æ–ª–∏:</p>
                        <p class="metric-value"><span id="init-v-total"></span> —Å–º¬≥</p>

                        <p class="metric-label">–ü—Ä–æ–≥–Ω–æ–∑: –°–æ–≤–æ–∫—É–ø–Ω–æ–µ –≤—Ä–µ–º—è —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏:</p>
                        <p class="metric-value"><span id="init-tox-time"></span> –¥–Ω–µ–π</p>
                    </div>
                </div>

                <hr>
                <h2>–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ê–Ω–∞–ª–∏–∑</h2>
                <div class="charts-section">
                    <div>
                        <canvas id="tumorChart"></canvas>
                    </div>
                    <div>
                        <canvas id="pkChart"></canvas>
                    </div>
                </div>
            </div> </div> </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('optimization-form');
            const loading = document.getElementById('loading');
            const resultsDiv = document.getElementById('results');
            const drugCheckMessageDiv = document.getElementById('drug-check-message');
            const fixedCycles = 6;

            let tumorChart = null;
            let pkChart = null;

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                loading.style.display = 'block';
                resultsDiv.style.display = 'none';

                const initialDose = parseFloat(document.getElementById('initial_dose').value);
                const initialInterval = parseFloat(document.getElementById('initial_interval').value);
                const selectedChemoDrug = document.getElementById('chemo_drug').value;
                const selectedTargetDrug = document.getElementById('target_drug').value;

                const inputData = {
                    patient_data: {
                        tumor_size_cm: parseFloat(document.getElementById('tumor_size').value),
                        subtype: document.getElementById('subtype').value,
                        ki67_level: parseFloat(document.getElementById('ki67_level').value),
                        age: parseInt(document.getElementById('age').value),
                        patient_stage: parseInt(document.getElementById('patient_stage').value),
                        ecog_status: parseInt(document.getElementById('ecog_status').value),
                        chemo_drug: selectedChemoDrug,
                        target_drug: selectedTargetDrug
                    },
                    initial_regimen: {
                        dose: initialDose,
                        interval: initialInterval
                    }
                };

                // –ò–ú–ò–¢–ê–¶–ò–Ø –í–´–ó–û–í–ê API:
                const response = mockBackendCall(inputData);

                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏
                setTimeout(() => {
                    displayResults(response, inputData.initial_regimen);
                    loading.style.display = 'none';
                    resultsDiv.style.display = 'block';
                }, 1000);
            });


            // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤
            function checkDrugSuitability(subtype, chemoDrug, targetDrug, predictedTreatment) {
                let checkMessage = '';
                let className = '';
                let suitable = true;
                let messages = [];

                // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¢–∞—Ä–≥–µ—Ç–Ω–æ–π —Ç–µ—Ä–∞–ø–∏–∏ (–∞–∫—Ç—É–∞–ª—å–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è HER2+)
                const is_her2_positive = subtype.includes("HER2+");

                if (is_her2_positive) {
                    if (targetDrug === "None" || targetDrug === "Lapatinib") {
                        messages.push(`‚ö†Ô∏è –¢–∞—Ä–≥–µ—Ç–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è: –î–ª—è –ø–æ–¥—Ç–∏–ø–∞ ${subtype} –æ–±—ã—á–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è –¢—Ä–∞—Å—Ç—É–∑—É–º–∞–± –∏/–∏–ª–∏ –ü–µ—Ä—Ç—É–∑—É–º–∞–±. –í—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç (${targetDrug === 'None' ? '–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç' : targetDrug}) –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª–µ–Ω. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –¢—Ä–∞—Å—Ç—É–∑—É–º–∞–± –∏–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Å –ü–µ—Ä—Ç—É–∑—É–º–∞–±–æ–º.`);
                        suitable = false;
                    } else {
                        messages.push(`‚úÖ –¢–∞—Ä–≥–µ—Ç–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è: –í—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç ${targetDrug} —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º –¥–ª—è –ø–æ–¥—Ç–∏–ø–∞ ${subtype}.`);
                    }
                } else if (!is_her2_positive && targetDrug !== "None") {
                    messages.push(`‚ö†Ô∏è –¢–∞—Ä–≥–µ—Ç–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è: –ü–æ–¥—Ç–∏–ø ${subtype} –Ω–µ —è–≤–ª—è–µ—Ç—Å—è HER2-–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ ${targetDrug} –Ω–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–æ. –í—ã–±–µ—Ä–∏—Ç–µ –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ –∏–ª–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω—É—é —Ç–µ—Ä–∞–ø–∏—é (–Ω–µ –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç—Å—è –∑–¥–µ—Å—å).`);
                    suitable = false;
                }

                // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏–∏
                const chemoRequired = predictedTreatment.includes("–•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è");

                if (chemoRequired) {
                    if (chemoDrug === "NotApplicable") {
                        messages.push(`‚ö†Ô∏è –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è: –î–ª—è –ø–æ–¥—Ç–∏–ø–∞ ${subtype} —Å–∏—Å—Ç–µ–º–Ω–∞—è —Ö–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞, –Ω–æ –≤—ã–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç "–ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ". –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Ä–µ–ø–∞—Ä–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –î–æ–∫—Å–æ—Ä—É–±–∏—Ü–∏–Ω).`);
                        suitable = false;
                    }
                    // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ –ø–æ–¥—Ç–∏–ø—É
                    else if (subtype === "TNBC" && chemoDrug !== "Carboplatin") {
                        messages.push(`‚ö†Ô∏è –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è: –î–ª—è TNBC —á–∞—Å—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ö–∞—Ä–±–æ–ø–ª–∞—Ç–∏–Ω. –í—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç ${chemoDrug} –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ö–∞—Ä–±–æ–ø–ª–∞—Ç–∏–Ω.`);
                        suitable = false;
                    } else if (subtype === "HR+HER2-" && chemoDrug !== "Doxorubicin" && chemoDrug !== "Paclitaxel") {
                        messages.push(`‚ö†Ô∏è –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è: –î–ª—è –ª—é–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –î–æ–∫—Å–æ—Ä—É–±–∏—Ü–∏–Ω –∏–ª–∏ –ü–∞–∫–ª–∏—Ç–∞–∫—Å–µ–ª. –í—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç ${chemoDrug} –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª–µ–Ω. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –î–æ–∫—Å–æ—Ä—É–±–∏—Ü–∏–Ω –∏–ª–∏ –ü–∞–∫–ª–∏—Ç–∞–∫—Å–µ–ª.`);
                        suitable = false;
                    } else {
                         // –ï—Å–ª–∏ –•–¢ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏ –≤—ã–±—Ä–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç
                         messages.push(`‚úÖ –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è: –í—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç ${chemoDrug} —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–±—â–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º.`);
                    }
                } else if (!chemoRequired && chemoDrug !== "NotApplicable") {
                     // –ï—Å–ª–∏ –•–¢ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –Ω–æ –≤—ã–±—Ä–∞–Ω –ø—Ä–µ–ø–∞—Ä–∞—Ç
                    messages.push(`‚ö†Ô∏è –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è: –°–∏—Å—Ç–µ–º–Ω–∞—è —Ö–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ç–∏–ø–∞/—Å—Ç–∞–¥–∏–∏. –í—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç ${chemoDrug} –Ω–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω. –í—ã–±–µ—Ä–∏—Ç–µ –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ.`);
                    suitable = false;
                } else if (!chemoRequired && chemoDrug === "NotApplicable") {
                     // –ï—Å–ª–∏ –•–¢ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏ –≤—ã–±—Ä–∞–Ω–æ "–ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ"
                    messages.push(`‚úÖ –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è: –í—ã–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∏–ø—É –ª–µ—á–µ–Ω–∏—è.`);
                }


                // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–ª–∞—Å—Å–∞
                checkMessage = messages.map(m => `<p>${m}</p>`).join('');

                if (checkMessage.includes('‚ö†Ô∏è')) {
                    className = 'warning';
                } else if (checkMessage) {
                    className = 'correct';
                } else {
                    className = ''; // –ù–µ –≤—ã–≤–æ–¥–∏–º –∫–ª–∞—Å—Å, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ª—å–∫–æ —Ö–∏—Ä—É—Ä–≥–∏—è)
                }

                return { message: checkMessage, className: className };
            }


            // –§—É–Ω–∫—Ü–∏—è, –∏–º–∏—Ç–∏—Ä—É—é—â–∞—è –æ—Ç–≤–µ—Ç –æ—Ç Python-–±—ç–∫–µ–Ω–¥–∞ (–ª–æ–≥–∏–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
            function mockBackendCall(inputData) {
                const ki67 = inputData.patient_data.ki67_level;
                const stage = inputData.patient_data.patient_stage;
                const subtype = inputData.patient_data.subtype;
                const ecog = inputData.patient_data.ecog_status;
                const initialTumorSize = inputData.patient_data.tumor_size_cm;
                const chemoDrug = inputData.patient_data.chemo_drug;
                const targetDrug = inputData.patient_data.target_drug;


                let predictedTreatment;
                const is_her2_positive = subtype.includes("HER2+");

                // --- –õ–û–ì–ò–ö–ê –ü–†–û–ì–ù–û–ó–ê –¢–ò–ü–ê –õ–ï–ß–ï–ù–ò–Ø ---
                if (is_her2_positive) {
                    predictedTreatment = "–•–∏—Ä—É—Ä–≥–∏—è + –¢–∞—Ä–≥–µ—Ç–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è";
                } else if (subtype === "TNBC") {
                    predictedTreatment = "–•–∏—Ä—É—Ä–≥–∏—è + –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è";
                } else if (subtype === "HR+HER2-") {
                    if (ki67 < 10.0 && stage <= 2) {
                        predictedTreatment = "–¢–æ–ª—å–∫–æ –•–∏—Ä—É—Ä–≥–∏—è";
                    } else if (ki67 >= 20.0 || stage >= 3) {
                        predictedTreatment = "–•–∏—Ä—É—Ä–≥–∏—è + –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è";
                    } else {
                        predictedTreatment = "–¢–æ–ª—å–∫–æ –•–∏—Ä—É—Ä–≥–∏—è";
                    }
                } else {
                    predictedTreatment = "–•–∏—Ä—É—Ä–≥–∏—è + –•–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è";
                }
                // --- –ö–û–ù–ï–¶ –õ–û–ì–ò–ö–ò –ü–†–û–ì–ù–û–ó–ê –¢–ò–ü–ê –õ–ï–ß–ï–ù–ò–Ø ---


                let mock_response;
                let message = '';

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤
                const drugCheck = checkDrugSuitability(subtype, chemoDrug, targetDrug, predictedTreatment);


                if (predictedTreatment === "–¢–æ–ª—å–∫–æ –•–∏—Ä—É—Ä–≥–∏—è" || predictedTreatment === "–•–∏—Ä—É—Ä–≥–∏—è + –¢–∞—Ä–≥–µ—Ç–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è") {
                    // –°—Ü–µ–Ω–∞—Ä–∏–π –±–µ–∑ –•–¢/–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
                    let systemTherapy = '';
                    if (predictedTreatment === "–•–∏—Ä—É—Ä–≥–∏—è + –¢–∞—Ä–≥–µ—Ç–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è" && targetDrug !== "None") {
                        systemTherapy = ` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–≥–µ–Ω—Ç–∞: <strong>${targetDrug}</strong>.`;
                    } else if (predictedTreatment === "–•–∏—Ä—É—Ä–≥–∏—è + –¢–∞—Ä–≥–µ—Ç–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è" && targetDrug === "None") {
                        systemTherapy = ` (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¢–∞—Ä–≥–µ—Ç–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è).`;
                    } else {
                         systemTherapy = ` (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è).`;
                    }

                    message = `–î–ª—è –ø–æ–¥—Ç–∏–ø–∞ <strong>${subtype}</strong> –Ω–∞ —Å—Ç–∞–¥–∏–∏ <strong>${stage}</strong> —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è - <strong>${predictedTreatment}</strong>${systemTherapy}. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –•–¢-—Å—Ö–µ–º—ã –Ω–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è.`;


                    mock_response = {
                        "status": "not_applicable",
                        "message": message,
                        "recommended_treatment_type": predictedTreatment,
                        "drug_check": drugCheck
                    };
                } else {
                    // –°—Ü–µ–Ω–∞—Ä–∏–π, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ö–∏–º–∏–æ—Ç–µ—Ä–∞–ø–∏—è: –ò–ú–ò–¢–ê–¶–ò–Ø –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –î–û–ó–´/–ò–ù–¢–ï–†–í–ê–õ–ê
                    message = `–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ–∑—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–ª—è –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ <strong>${chemoDrug}</strong> –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ª—É—á—à–µ–≥–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å / –¢–æ–∫—Å–∏—á–Ω–æ—Å—Ç—å.`;


                    // 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –¥–æ–∑—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç Ki67 –∏ Stage)
                    const aggressiveness_factor = (ki67 / 100) * (stage / 4);
                    const optimalDose = (200 + aggressiveness_factor * 200).toFixed(2);

                    // 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç ECOG/—Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏)
                    const baseInterval = 10;
                    const intervalIncrease = ecog * 4.5;
                    const optimalInterval = Math.min(28, baseInterval + intervalIncrease).toFixed(2);

                    const totalTimeDays = (parseFloat(optimalInterval) * fixedCycles).toFixed(2);

                    // –ò–º–∏—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
                    const tox_factor = 1.0 + (ecog * ecog * 0.5);
                    const v_reduction_factor = 1.0 - (aggressiveness_factor * 0.5);
                    const initialVolume = (4/3) * Math.PI * Math.pow(initialTumorSize / 2, 3);

                    const v_init = (initialVolume * (1 + v_reduction_factor) * 0.5).toFixed(2);
                    const v_opt = (initialVolume * (1 + v_reduction_factor / 2) * 0.1).toFixed(2);


                    mock_response = {
                        "status": "success",
                        "recommended_treatment_type": predictedTreatment,
                        "message": message,
                        "drug_check": drugCheck,
                        "patient_params": {"lambda_S": (0.05 * (1 + ki67/100)).toFixed(4), "lambda_R": "0.0440", "k_e": "0.120"},
                        "optimal_regimen": {
                            "dose": optimalDose,
                            "interval": optimalInterval,
                            "cycles": fixedCycles,
                            "total_time_days": totalTimeDays
                        },
                        "metrics": {
                            "initial": {
                                "V_end_cm3": v_init,
                                "VR_end_cm3": (v_init * 0.8).toFixed(4),
                                "Tox_time_days": (50.0 * tox_factor).toFixed(2)
                            },
                            "optimal": {
                                "V_end_cm3": v_opt,
                                "VR_end_cm3": (v_opt * 0.05).toFixed(4),
                                "Tox_time_days": (40.0 * tox_factor).toFixed(2)
                            }
                        },
                        "plot_data": generateMockPlotData(
                            inputData.initial_regimen.dose,
                            inputData.initial_regimen.interval,
                            fixedCycles,
                            parseFloat(optimalDose),
                            parseFloat(optimalInterval),
                            fixedCycles,
                            initialVolume
                        )
                    };
                }
                return mock_response;
            }


            function generateMockPlotData(initialDose, initialInterval, initialCycles, optimalDose, optimalInterval, optimalCycles, initialVolume) {
                const totalDays = Math.max(initialInterval * initialCycles, optimalInterval * optimalCycles);
                const numPoints = 100;
                const times = Array.from({length: numPoints}, (_, i) => (i / (numPoints - 1)) * (totalDays * 1.2));
                const V_init = [];
                const V_opt = [];
                const C_init = [];
                const C_opt = [];
                const initialV = initialVolume;

                for (let i = 0; i < numPoints; i++) {
                    const t = times[i];
                    const growthRate = 0.005;
                    const decayFactorInit = 0.7;
                    const decayFactorOpt = 0.9;
                    const doseEffectInit = (initialDose / 300) * decayFactorInit;
                    const doseEffectOpt = (optimalDose / 300) * decayFactorOpt;

                    // –û–±—ä–µ–º: V_init
                    let V_init_val = initialV * Math.exp(growthRate * t);
                    for(let c = 1; c <= initialCycles; c++) {
                        const doseTime = initialInterval * c;
                        if (t >= doseTime) {
                            V_init_val -= V_init_val * doseEffectInit * (1 - Math.exp(-(t - doseTime) / 30));
                        }
                    }
                    V_init.push(Math.max(0.1, V_init_val));

                    // –û–±—ä–µ–º: V_opt
                    let V_opt_val = initialV * Math.exp(growthRate * t * 0.5);
                    for(let c = 1; c <= optimalCycles; c++) {
                        const doseTime = optimalInterval * c;
                        if (t >= doseTime) {
                             V_opt_val -= V_opt_val * doseEffectOpt * (1 - Math.exp(-(t - doseTime) / 20));
                        }
                    }
                    V_opt.push(Math.max(0.1, V_opt_val));


                    // –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è (C1)
                    const k_e = 0.12;
                    let C_init_val = 0.01;
                    for(let c = 1; c <= initialCycles; c++) {
                        const doseTime = initialInterval * c;
                        if (t >= doseTime) {
                            C_init_val += (initialDose / 2) * Math.exp(-k_e * (t - doseTime));
                        }
                    }

                    let C_opt_val = 0.01;
                    for(let c = 1; c <= optimalCycles; c++) {
                        const doseTime = optimalInterval * c;
                        if (t >= doseTime) {
                             C_opt_val += (optimalDose / 2) * Math.exp(-k_e * (t - doseTime));
                        }
                    }
                    C_init.push(C_init_val);
                    C_opt.push(C_opt_val);
                }

                return {
                    times: times,
                    V_init: V_init,
                    V_opt: V_opt,
                    C_init: C_init,
                    C_opt: C_opt
                };
            }


            function displayResults(response, initialRegimen) {
                const recommendedTreatmentElement = document.getElementById('recommended-treatment');
                const treatmentMessageElement = document.getElementById('treatment-message');
                const optimizationResultsElement = document.getElementById('optimization-results');
                const drugCheckMessageDiv = document.getElementById('drug-check-message');


                recommendedTreatmentElement.textContent = response.recommended_treatment_type;
                treatmentMessageElement.innerHTML = response.message;

                // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤
                drugCheckMessageDiv.innerHTML = response.drug_check.message;
                drugCheckMessageDiv.className = response.drug_check.className;


                if (response.status === "not_applicable") {
                    // –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–º–∞ (–Ω–µ—Ç –•–¢)
                    optimizationResultsElement.style.display = 'none';
                    if (tumorChart) tumorChart.destroy();
                    if (pkChart) pkChart.destroy();
                    return;
                }

                // –ï—Å–ª–∏ –•–¢ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏ —Å—Ç–∞—Ç—É—Å 'success'
                optimizationResultsElement.style.display = 'block';

                // 1. –ò—Å—Ö–æ–¥–Ω–∞—è —Å—Ö–µ–º–∞ (–ü—Ä–æ–≥–Ω–æ–∑)
                document.getElementById('init-dose').textContent = initialRegimen.dose.toFixed(2);
                document.getElementById('init-interval').textContent = initialRegimen.interval.toFixed(1);
                document.getElementById('init-cycles').textContent = fixedCycles;
                document.getElementById('init-total-time').textContent = (initialRegimen.interval * fixedCycles).toFixed(1);
                document.getElementById('init-v-total').textContent = response.metrics.initial.V_end_cm3;
                document.getElementById('init-tox-time').textContent = response.metrics.initial.Tox_time_days;


                // 2. –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ (–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)
                document.getElementById('opt-dose').textContent = response.optimal_regimen.dose;
                document.getElementById('opt-interval').textContent = response.optimal_regimen.interval;
                document.getElementById('opt-cycles').textContent = response.optimal_regimen.cycles;
                document.getElementById('opt-total-time').textContent = response.optimal_regimen.total_time_days;
                document.getElementById('opt-v-total').textContent = response.metrics.optimal.V_end_cm3;
                document.getElementById('opt-tox-time').textContent = response.metrics.optimal.Tox_time_days;

                // 3. –ì—Ä–∞—Ñ–∏–∫–∏
                renderCharts(response.plot_data);
            }

            function renderCharts(plotData) {
                const times = plotData.times.map(t => t.toFixed(0)); // –î–Ω–∏
                const V_init = plotData.V_init;
                const V_opt = plotData.V_opt;
                const C_init = plotData.C_init;
                const C_opt = plotData.C_opt;

                // –£–Ω–∏—á—Ç–æ–∂–∞–µ–º —Å—Ç–∞—Ä—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
                if (tumorChart) tumorChart.destroy();
                if (pkChart) pkChart.destroy();

                // –ì—Ä–∞—Ñ–∏–∫ –æ–±—ä–µ–º–∞ –æ–ø—É—Ö–æ–ª–∏
                const tumorCtx = document.getElementById('tumorChart').getContext('2d');
                tumorChart = new Chart(tumorCtx, {
                    type: 'line',
                    data: {
                        labels: times,
                        datasets: [
                            {
                                label: '–ò—Å—Ö–æ–¥–Ω–∞—è –°—Ö–µ–º–∞ (–û–±—ä–µ–º —Å–º¬≥)',
                                data: V_init,
                                borderColor: 'rgb(220, 53, 69)', // –ö—Ä–∞—Å–Ω—ã–π
                                borderWidth: 2,
                                fill: false,
                                pointRadius: 0
                            },
                            {
                                label: '–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –°—Ö–µ–º–∞ (–û–±—ä–µ–º —Å–º¬≥)',
                                data: V_opt,
                                borderColor: 'rgb(0, 123, 255)', // –°–∏–Ω–∏–π
                                borderWidth: 2,
                                fill: false,
                                pointRadius: 0
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            title: {
                                display: true,
                                text: '–û–±—ä–µ–º –û–ø—É—Ö–æ–ª–∏ (V) —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º'
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: '–í—Ä–µ–º—è (–¥–Ω–∏)'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: '–û–±—ä–µ–º (—Å–º¬≥)'
                                },
                                beginAtZero: true
                            }
                        }
                    }
                });

                // –ì—Ä–∞—Ñ–∏–∫ –§–∞—Ä–º–∞–∫–æ–∫–∏–Ω–µ—Ç–∏–∫–∏ (–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è)
                const pkCtx = document.getElementById('pkChart').getContext('2d');
                pkChart = new Chart(pkCtx, {
                    type: 'line',
                    data: {
                        labels: times,
                        datasets: [
                            {
                                label: '–ò—Å—Ö–æ–¥–Ω–∞—è –°—Ö–µ–º–∞ (–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è)',
                                data: C_init,
                                borderColor: 'rgb(255, 193, 7)', // –ñ–µ–ª—Ç—ã–π
                                borderWidth: 2,
                                fill: false,
                                pointRadius: 0
                            },
                            {
                                label: '–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –°—Ö–µ–º–∞ (–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è)',
                                data: C_opt,
                                borderColor: 'rgb(40, 167, 69)', // –ó–µ–ª–µ–Ω—ã–π
                                borderWidth: 2,
                                fill: false,
                                pointRadius: 0
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            title: {
                                display: true,
                                text: '–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –ü—Ä–µ–ø–∞—Ä–∞—Ç–∞ (C) –≤ –∫—Ä–æ–≤–∏'
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: '–í—Ä–µ–º—è (–¥–Ω–∏)'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: '–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è'
                                },
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>